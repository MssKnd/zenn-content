---
title: "å®Ÿéš›ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‹ã‚‰è€ƒãˆã‚‹ã€Œæ‚ªã„æ–¹ãŒè‰¯ã„ã€åŸå‰‡"
emoji: "ğŸƒ"
type: "idea" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [TypeScript]
published: false
---

:::message
è‘—è€…ã¯ãŸã³ãŸã³ TypeScript ã§æ›¸ã‹ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°é€šã—ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ‰‹æ³•ã®è©¦è¡Œã‚’ã—ã¦ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ã¯ãã®å–ã‚Šçµ„ã¿ã®æœ€ä¸­ã«æ€è€ƒã—ãŸå†…å®¹ã®ã¾ã¨ã‚ã§ã™ã€‚ç¿’ç†Ÿä¸­ã®ãŸã‚ç”Ÿç…®ãˆã®ç®‡æ‰€ãŒã‚ã‚Šã¾ã™ã€‚
:::

ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã£ã¦é›£ã—ã„ãªã¨è€ƒãˆãŸã“ã¨ãŒã‚ã‚Šã€è‡ªåˆ†ã®æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã‚’è¨˜éŒ²ã™ã‚‹ãŸã‚ã«è¨˜äº‹ã«ã—ã¦ã¿ã¾ã—ãŸã€‚

# å‰ææ¡ä»¶

ã“ã®è¨˜äº‹ã§ã¯ã¾ãšä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã®è€ƒå¯Ÿã‹ã‚‰ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã¨ã‚ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹æƒ³å®šã®ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚

```ts:simple-path.ts
const USER_VIDEO_PAGE_PATH =
  (userId?: number, videoId?: number, timestamp?: number) => 
    `/user/${userId ?? ':userId'}/video/${videoId ?? ':videoId'}${timestamp ? `?timestamp=${timestamp}` : ''}`;
```

## è¦³å¯Ÿ
ã“ã‚Œã ã‘ã§ä½•ã‚’ã—ãŸã„ã‚³ãƒ¼ãƒ‰ã‹ã€åˆ†ã‹ã‚‹æ–¹ã«ã¯åˆ†ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚å‰ææ¡ä»¶ã¨ã—ã¦ã“ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç´ã¥ãå‹•ç”»ã‚’è¦–è´ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã€ã•ã‚‰ã«å‹•ç”»ã®ä»»æ„æ™‚åˆ»ã‚’å‚ç…§ã§ãã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚

å‰è¿°ã—ãŸã‚³ãƒ¼ãƒ‰ã®åˆ©ç”¨ä¾‹ã¯ä»¥ä¸‹ã§ã™ã€‚

```ts
const routingPath = USER_VIDEO_PAGE_PATH(); // '/user/:userId/video/:videoId'
const path = USER_VIDEO_PAGE_PATH(1000, 30); // '/user/1000/video/30'
const path = USER_VIDEO_PAGE_PATH(1000, 50, 1650753766); // '/user/1000/video/50?timestamp=1650753766'
```

åˆ©ç”¨ä¾‹ã‹ã‚‰ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã«ã¯ä»¥ä¸‹ã®è¦ä»¶ãŒã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

- `'/resource/:resourceId'` å½¢å¼ã® path æ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹
- ä¸Šè¨˜ã‚’å…ƒã«å®Ÿéš›ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’è¡¨ç¾ã™ã‚‹ path æ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹
- ä¸Šè¨˜ã«ã‚¯ã‚¨ãƒªã‚’ä»˜ä¸ã—ãŸ path æ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹

ã¾ãŸã€TypeScript ã§ã¯æ…£ç¿’çš„ã«å®šæ•°åã‚’ `SCREAMING_SNAKE_CASE` ã§æ›¸ãã¾ã™ã€‚é–¢æ•°ã§ã‚ã‚‹ã“ã®ã‚³ãƒ¼ãƒ‰ãŒå®šæ•°åã®ã‚ˆã†ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã¯ã€æœ€åˆã«ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ãŒã‚ã‚Šã€å‰è¿°ã—ãŸè¦ä»¶ãŒè¿½åŠ ã•ã‚ŒãŸãŸã‚ã€æ—¢å­˜ã®å®Ÿè£…ãŒæ‹¡å¼µã•ã‚ŒãŸéå»ãŒã‚ã‚Šãã†ã§ã™ã€‚

```ts
// æ—¢å­˜ã®å®Ÿè£…
const PATHS = {
  HOME: '/',
  DASHBOARD: '/dashboard',
} as const;

// è¦ä»¶ãŒè¿½åŠ ã•ã‚ŒãŸå®Ÿè£…
const PATHS = {
  HOME: () => '/',
  DASHBOARD: () => '/dashboard',
  USER: (userId?: number) => `/user/${userId ?? ':userId'}`,
  USER_VIDEO: // çœç•¥ï¼šå‰è¿°ã—ãŸ USER_VIDEO_PAGE_PATH ã¨åŒç­‰ã®å®Ÿè£…
} as const;
```

## èª²é¡Œã®æ•´ç†

ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ä½•ãŒè¦ä»¶ã‹è¦³å¯Ÿã™ã‚Œã°ç†è§£ã§ãã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã§ã™ãŒã€ã„ãã¤ã‹èª²é¡ŒãŒã‚ã‚Šãã†ã§ã™ã€‚

- è¤‡æ•°ã®å¼•æ•°ãŒå¿…è¦ã§ã‚ã‚‹å ´åˆã€å‡ºåŠ›ãŒä¸ååˆ†ã§ã‚ã‚‹å ´åˆãŒç™ºç”Ÿã—ã†ã‚‹ï¼ˆ`'/user/1000/video/:videoId'`ï¼‰
- è¤‡æ•°ã®ä»»æ„ã‚¯ã‚¨ãƒªãŒå¿…è¦ã«ãªã£ãŸå ´åˆã€å‡¦ç†ãŒè¤‡é›‘åŒ–ã™ã‚‹

å¯èª­æ€§ã®é¢ã§ã¯ä»¥ä¸‹ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

- å‘½åè¦å‰‡ã®æ…£ç¿’çš„ã«å®šæ•°ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ãŒå®Ÿéš›ã«ã¯é–¢æ•°ã§ã‚ã‚‹
- è¤‡æ•°ã® path ã‚’ PATHS ã¨ã—ã¦ã¾ã¨ã‚ã‚‹ã“ã¨ã§é–¢å¿ƒäº‹ã‚’å‡é›†ã—ã¦ã„ã‚‹ãŒã€å†…éƒ¨ã«åˆ†å²ãŒã‚ã‚‹ãŸã‚ä¸€è¦§æ€§ãŒä½ã„
- `'/resource/:resourceId'` å½¢å¼ã® path æ–‡å­—åˆ—ãŒå¿…è¦ãªå ´é¢ã¨ã€å®Ÿéš›ã® path ãŒå¿…è¦ãªå ´é¢ã¯ç•°ãªã‚‹ãŸã‚ã€åˆ†å²ã§ã¯ãªãæ©Ÿèƒ½ã¨ã—ã¦åˆ†ã‘ãŸæ–¹ãŒè¦ä»¶ã‚’ç†è§£ã—ã‚„ã™ã„

ã¾ãŸã€ã‚¹ã‚±ãƒ¼ãƒ«ã¨ã„ã†è¦³ç‚¹ã§ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ãªè¦ä»¶ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
- ãã‚Œãã‚Œã® path ã‚’æ¨ªæ–­ã—ãŸã‚¯ã‚¨ãƒªã®è¦ä»¶ãŒè¿½åŠ ã•ã‚ŒãŸå ´åˆã€å…¨ã¦ã® path ã«ã‚¯ã‚¨ãƒªæ¡ä»¶ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- ãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒˆï¼ˆæœ«å°¾ã« `#message` ãªã©ã® # ã‹ã‚‰å§‹ã¾ã‚‹æ–‡å­—åˆ—ï¼‰ã®è¦ä»¶ã«å¯¾å¿œã§ããªã„

# ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
## ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
ã¾ãšã¯ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ç”¨æ„ã—ã¾ã™ã€‚ä»Šå›ã¯ä»¥ä¸‹ã‚’ç”¨æ„ã—ã¾ã—ãŸã€‚

```ts
describe("path", () => {
  it("ãƒ‘ã‚¹ã‚’æ–‡å­—åˆ—ã¨ã—ã¦å–å¾—ã§ãã‚‹", () => {});
  it("æŒ‡å®šã—ãŸ id ã‚’åŸ‹ã‚ãŸæ–‡å­—åˆ—ã‚’å–å¾—ã§ãã‚‹", () => {});
  it("æŒ‡å®šã—ãŸè¤‡æ•°ã® id ã‚’åŸ‹ã‚ãŸæ–‡å­—åˆ—ã‚’å–å¾—ã§ãã‚‹", () => {});
  it("ã‚¯ã‚¨ãƒªã‚’è¿½åŠ ã—ãŸæ–‡å­—åˆ—ã‚’å–å¾—ã§ãã‚‹", () => {});
  it("è¤‡æ•°ã®ã‚¯ã‚¨ãƒªã‚’è¿½åŠ ã—ãŸæ–‡å­—åˆ—ã‚’å–å¾—ã§ãã‚‹", () => {});
  it("æ—¢ã«ã‚¯ã‚¨ãƒªãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹Pathã«å¯¾ã—ã¦ã‚¯ã‚¨ãƒªã‚’è¿½åŠ ã§ãã‚‹", () => {});
  it("id ã¨ã‚¯ã‚¨ãƒªã‚’è¿½åŠ ã§ãã‚‹", () => {});
});
```

## ã‚¯ãƒ©ã‚¹ã§ã®å®Ÿè£…
ã‚¯ãƒ©ã‚¹ã§ã®å®Ÿè£…ã‚’è€ƒãˆã¦ã¿ã¾ã—ãŸã€‚

```ts
export class Path {
  constructor(private pathString: string) {}
  toString() {
    return this.pathString;
  }
  fillId(ids: { [id: string]: string | number }) {
    for (const id in ids) {
      this.pathString = this.pathString.replace(`:${id}`, ids[id].toString());
    }
  }
  appendQueries(queries: { [query: string]: string | number }) {
    const queryString = Object.keys(queries)
      .map((key) => `${key}=${queries[key]}`)
      .join("&");
    if (this.pathString.includes("?")) {
      this.pathString = `${this.pathString}&${queries}`;
    }
    this.pathString = `${this.pathString}?${queries}`;
  }
}
```

path æƒ…å ±ã‚’é›†ç´„ã—ãŸå ´åˆã«ã‚‚ã€ä¸€è¦§æ€§ãŒè‰¯ã•ãã†ã«è¦‹ãˆã¾ã™ã€‚

```ts
const paths = {
  userPagePath: new Path('/user/:userId');
  userVideoPagePath: new Path('/user/:userId/video/:videoId');
}
```

å®Ÿéš›ã«è¨˜è¼‰ã—ã¦ã¿ãŸã‚‰ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```ts
const userVideoPagePath = new Path('/user/:userId/video/:videoId');
const userVideoPagePathString = userVideoPagePath.toString(); // '/user/:userId/video/:videoId'
const filledUserVideoPagePathString = userVideoPagePath.fillId({
  userId: 1000,
  videoId: 30,
}); // '/user/1000/video/30'
const filledUserVideoPagePathStringWithQuery = userVideoPagePath.appendQueries({
  timestamp: 30,
}); // '/user/1000/video/30?timestamp=1650753766'
const filledUserVideoPagePathString_2 = userVideoPagePath.fillId({
  userId: 1200,
  videoId: 10,
}); // '/user/1000/video/30' !!!!!!!!!!!
```

è‰¯ã•ãã†ã«è¦‹ãˆã¾ã™ãŒã€`userVideoPagePath` ã§ä¿æŒã—ã¦ã„ã‚‹ path ãŒãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ãŸã³ã«å¤‰æ›´ã•ã‚Œã¦ã—ã¾ã„ã€`Path.fillId()` ã®å†åˆ©ç”¨ãŒã§ããªããªã£ã¦ã„ã¾ã™ã€‚

private ãƒ¡ãƒ³ãƒãƒ¼ã‚’å¤‰æ›´ã—ãªã„ã‚ˆã†ã«ã—ã€ã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯æ–‡å­—åˆ—ã§ã¯ç„¡ã Path ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```diff ts
  export class Path {
+   constructor(private pathString: Readonly<string>) {}
-   constructor(private pathString: string) {}
    toString() {
      return this.pathString;
    }
    fillId(ids: { [id: string]: string | number }) {
+     const _pathString = this.pathString;
      for (const id in ids) {
+       _pathString = _pathString.replace(`:${id}`, ids[id].toString());
-       this.pathString = this.pathString.replace(`:${id}`, ids[id].toString());
      }
+     return new Path(_pathString);
    }
    appendQueries(queries: { [query: string]: string | number }) {
      const queryString = Object.keys(queries)
        .map((key) => `${key}=${queries[key]}`)
        .join("&");
      if (this.pathString.includes("?")) {
+       new Path(`${this.pathString}&${queries}`);
-       this.pathString = `${this.pathString}&${queries}`;
      }
+     new Path(`${this.pathString}?${queries}`;)
-     this.pathString = `${this.pathString}?${queries}`;
    }
  }
```


<!-- 

URLãƒ‘ã‚¹ã«é–¢ã™ã‚‹ä»¥ä¸‹ã®è¦ä»¶ã‚’æº€ãŸã™ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’è€ƒãˆã¾ã™ã€‚

- ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹URIã‚’ä¿æŒã™ã‚‹(ä¾‹ï¼š`/user/:userId/article/:articleId`)
- ä¿æŒã—ã¦ã„ã‚‹URIã‚’æ–‡å­—åˆ—ã¨ã—ã¦å–å¾—ã§ãã‚‹
- ä¿æŒã—ã¦ã„ã‚‹URIã®idã‚’åŸ‹ã‚ãŸæ–‡å­—åˆ—ã‚’å–å¾—ã§ãã‚‹
- ä¿æŒã—ã¦ã„ã‚‹URIã«ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ä»˜ä¸ã—ãŸæ–‡å­—åˆ—ã‚’å–å¾—ã§ãã‚‹
- ä¸Šè¨˜ï¼’ã¤ã®è¦ä»¶ã‚’åŒæ™‚ã«æº€ãŸã™
- ä¿æŒã—ã¦ã„ã‚‹ãƒ™ãƒ¼ã‚¹URIã¯å†åˆ©ç”¨ã§ãã‚‹ï¼ˆä¸Šæ›¸ãã•ã‚Œãªã„ï¼‰

ã¾ãšã¯ã€Classã§è€ƒãˆã¦ã¿ã¾ã™ã€‚

è¦ä»¶ã‚’æº€ãŸã™ãƒ†ã‚¹ãƒˆã‚’ç”¨æ„ã—ã¾ã™ã€‚



 -->

